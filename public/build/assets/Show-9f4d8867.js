import{_,r as w,K as B,j as r,a as e,F as I,g as c,Q as y}from"./app-b394f84d.js";import{I as f,A as P}from"./AuthenticatedLayout-d8ad9a1e.js";import{T as m}from"./TextInput-1733ca29.js";import{L}from"./LoadingButton-cfd8b056.js";import{i as d}from"./utils-37096994.js";import"./Logo-white-2a851e2e.js";import"./index-0ee3514d.js";import"./dayjs.min-6a542ed9.js";const R=1,v=3,q=()=>{const{user:a,approvedDeposit:x,pendingDeposit:p,flash:H,user_permissions:o}=_().props,[s,u]=w.exports.useState(0),[k,D]=w.exports.useState(""),{data:N,setData:l,errors:A,post:j,processing:z}=B({amount:0,deposit_date:new Date,status:R,user_id:a.id}),C=t=>{t.preventDefault(),j(route("deposit.store")),l("amount",0)},T=t=>(confirm("Are you sure you want to delete this deposit?")&&c.delete(route("deposit.destroy",t)),!0),S=t=>(confirm("Are you sure you want to approve this deposit?")&&c.post(route("deposit.accept",t)),!0),W=t=>(confirm("Are you sure you want to reject this deposit?")&&c.post(route("deposit.reject",t)),!0),F=()=>s===0||s<0?y.error("Woops! amount can not be equal or less than zero"):s>a.deposit?(u(0),y.error("Woops! amount can not greater than your current deposit")):(c.post(route("deposit.withdraw"),{user_id:a.id,deposit_date:new Date,status:v,amount:s,description:k}),u(0));return r("div",{className:"rounded-lg border border-stroke bg-white p-5 shadow-default dark:border-strokedark dark:bg-boxdark",children:[r("h1",{className:"mb-8 text-3xl font-bold",children:["Deposits of ",a.full_name]}),r("div",{className:"overflow-x-auto p-3",children:[r("div",{className:"col-span-full mb-5",children:[r("h6",{className:"mb-1 text-gray-900 text-xl font-bold",children:["Total: ",a.deposit," BDT"]}),r("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4",children:[d("access::deposit-create",o)&&e("form",{className:"flex items-center justify-between gap-2",name:"createForm",onSubmit:C,children:r("div",{className:"w-3/4 flex flex-col ",children:[e(m,{label:"",name:"amount",type:"number",value:N.amount,onChange:t=>{t.target.value<0?l("amount",0):l("amount",t.target.value)},errors:A.amount}),e("br",{}),e(m,{label:"",name:"description",type:"text",value:N.description,onChange:t=>l("description",t.target.value)}),e("br",{}),e(L,{loading:!1,type:"submit",className:" p-1 md:p-4 lg:p-4  text-sm font-medium text-center text-white bg-buttonColor-400 rounded",children:"Add Deposit"})]})}),d("access::deposit-withdraw",o)&&e("div",{className:"flex items-center justify-between gap-2",children:r("div",{className:"w-3/4 flex flex-col",children:[e(m,{label:"",name:"withdraw",type:"number",value:s,onChange:t=>u(t.target.value)}),e("br",{}),e(m,{label:"",name:"description",type:"text",value:k,onChange:t=>D(t.target.value)}),e("br",{}),e("button",{onClick:F,type:"button",className:"p-1 md:p-4 lg:p-4 text-xs font-medium text-center text-white bg-buttonColor-1000 rounded",children:"Add Withdraw"})]})})]})]}),r("div",{className:"flex flex-col gap-4",children:[p.length?r("div",{className:"w-full",children:[e("h6",{className:"mb-4 text-gray-900 text-xl font-bold",children:"Deposit Request"}),r("table",{className:"w-full table-auto",children:[e("thead",{children:r("tr",{className:"bg-gray-2 text-left dark:bg-meta-4",children:[e("th",{className:"border border-[#eee] p-4 font-medium text-black dark:text-white",children:"No"}),e("th",{className:"border border-[#eee] p-4 font-medium text-black dark:text-white",children:"Date"}),e("th",{className:"border border-[#eee] p-4 font-medium text-black dark:text-white",children:"Amount"}),e("th",{className:"border border-[#eee] p-4 font-medium text-black dark:text-white",children:"Description"}),e("th",{className:"border border-[#eee] p-4 font-medium text-black dark:text-white",children:"Action"})]})}),e("tbody",{children:p.length?p.map(({id:t,amount:n,deposit_date:h,description:b},i)=>r("tr",{children:[e("td",{className:"border border-[#eee] p-4 dark:border-strokedark",children:e("p",{children:i+1})}),e("td",{className:"border border-[#eee] p-4 dark:border-strokedark",children:e("p",{children:h})}),e("td",{className:"border border-[#eee] p-4 dark:border-strokedark",children:e("p",{children:n})}),e("td",{className:"border border-[#eee] p-4 dark:border-strokedark",children:e("p",{children:b})}),e("td",{className:"border border-[#eee] p-4 dark:border-strokedark",children:r("div",{className:"flex items-center gap-4 justify-end",children:[d("access::deposit-approve",o)&&e("button",{onClick:()=>S(t),className:"inline-flex items-center justify-center gap-0.5 focus:outline-none focus:underline",children:e(f,{name:"FaCheck",className:"w-6 h-4 text-buttonColor-400 fill-current"})}),d("access::deposit-reject",o)&&e("button",{onClick:()=>W(t),className:"inline-flex items-center justify-center gap-0.5 focus:outline-none focus:underline",children:e(f,{name:"FaTimes",className:"w-6 h-4 text-red-400 fill-current"})})]})})]},i)):e("tr",{children:e("td",{className:"border border-[#eee] p-4 dark:border-strokedark",colSpan:4,children:e("p",{children:"No transaction found"})})})})]})]}):e(I,{}),r("div",{className:"w-full",children:[e("h6",{className:"mb-4 text-gray-900 text-xl font-bold",children:"Transaction History"}),r("table",{className:"w-full table-auto",children:[e("thead",{children:r("tr",{className:"bg-gray-2 text-left dark:bg-meta-4",children:[e("th",{className:"border border-[#eee] p-4 font-medium text-black dark:text-white",children:"No"}),e("th",{className:"border border-[#eee] p-4 font-medium text-black dark:text-white",children:"Date"}),e("th",{className:"border border-[#eee] p-4 font-medium text-black dark:text-white",children:"Amount"}),e("th",{className:"border border-[#eee] p-4 font-medium text-black dark:text-white",children:"Description"}),d("access::deposit-delete",o)&&e("th",{className:"border border-[#eee] p-4 font-medium text-black dark:text-white",children:"Action"})]})}),e("tbody",{children:x.length?x.map(({id:t,amount:n,deposit_date:h,description:b,status:i},g)=>r("tr",{children:[e("td",{className:"border border-[#eee] p-4 dark:border-strokedark",children:e("p",{className:"",children:g+1})}),e("td",{className:"border border-[#eee] p-4 dark:border-strokedark",children:e("p",{className:"",children:h})}),e("td",{className:"border border-[#eee] p-4 dark:border-strokedark",children:i===v?r("p",{className:"rounded-full text-center bg-danger bg-opacity-10 text-danger p-2",children:["- ",n," BDT"]}):r("p",{className:"",children:[n," BDT"]})}),e("td",{className:"border border-[#eee] p-4 dark:border-strokedark",children:e("p",{className:"",children:b})}),d("access::deposit-delete",o)&&e("td",{className:"border border-[#eee] p-4 dark:border-strokedark",children:e("div",{className:"flex items-center gap-4 justify-end",children:e("button",{onClick:()=>T(t),className:"inline-flex items-center justify-center gap-0.5 focus:outline-none focus:underline",children:e(f,{name:"FaTrashAlt",className:"w-6 h-4 text-gray-400 fill-current"})})})})]},g)):e("tr",{className:"hover:bg-gray-100 focus-within:bg-gray-100",children:e("td",{className:"border border-[#eee] p-4 dark:border-strokedark",colSpan:4,children:e("p",{children:"No transaction found"})})})})]})]})]})]})]})};q.layout=a=>e(P,{title:"Deposit Details",children:a});export{q as default};
