import{_ as C,r as W,K as S,j as t,a as e,g as l,Q as g}from"./app-b960d9f7.js";import{I as u,A as _}from"./AuthenticatedLayout-2e71d055.js";import{T as k}from"./TextInput-d72be1bc.js";import{L as B}from"./LoadingButton-8b2aee1b.js";import{i as o}from"./utils-e993d99e.js";import"./Logo-25d59469.js";import"./index-1f6f7bd3.js";import"./dayjs.min-21191963.js";const F=1,x=3,I=()=>{const{user:d,approvedDeposit:h,pendingDeposit:b,flash:P,user_permissions:a}=C().props,[s,c]=W.useState(0),{data:N,setData:m,errors:w,post:y,processing:L}=S({amount:0,deposit_date:new Date,status:F,user_id:d.id}),v=r=>{r.preventDefault(),y(route("deposit.store")),m("amount",0)},D=r=>(confirm("Are you sure you want to delete this deposit?")&&l.delete(route("deposit.destroy",r)),!0),j=r=>(confirm("Are you sure you want to approve this deposit?")&&l.post(route("deposit.accept",r)),!0),A=r=>(confirm("Are you sure you want to reject this deposit?")&&l.post(route("deposit.reject",r)),!0),T=()=>s===0||s<0?g.error("Woops! amount can not be equal or less than zero"):s>d.deposit?(c(0),g.error("Woops! amount can not greater than your current deposit")):(l.post(route("deposit.withdraw"),{user_id:d.id,deposit_date:new Date,status:x,amount:s}),c(0));return t("div",{className:"rounded-lg border border-stroke bg-white p-5 shadow-default dark:border-strokedark dark:bg-boxdark",children:[t("h1",{className:"mb-8 text-3xl font-bold",children:["Deposits of ",d.full_name]}),t("div",{className:"overflow-x-auto p-3",children:[t("div",{className:"col-span-full mb-5",children:[t("h6",{className:"mb-1 text-gray-900 text-xl font-bold",children:["Total: ",d.deposit," BDT"]}),t("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4",children:[o("access::deposit-create",a)&&t("form",{className:"flex items-center justify-between gap-2",name:"createForm",onSubmit:v,children:[e("div",{className:"w-3/4 ",children:e(k,{label:"",name:"amount",type:"number",value:N.amount,onChange:r=>{r.target.value<0?m("amount",0):m("amount",r.target.value)},errors:w.amount})}),e(B,{loading:!1,type:"submit",className:"p-1 md:p-4 lg:p-4  text-sm font-medium text-center text-white bg-buttonColor-400 rounded",children:"Add Deposit"})]}),o("access::deposit-withdraw",a)&&t("div",{className:"flex items-center justify-between gap-2",children:[e("div",{className:"w-3/4",children:e(k,{label:"",name:"withdraw",type:"number",value:s,onChange:r=>c(r.target.value)})}),e("button",{onClick:T,type:"button",className:"p-1 md:p-4 lg:p-4 text-xs font-medium text-center text-white bg-buttonColor-1000 rounded",children:"Add Withdraw"})]})]})]}),t("div",{className:"grid gap-4 lg:gap-8 md:grid-cols-2",children:[t("div",{children:[e("h6",{className:"mb-4 text-gray-900 text-xl font-bold",children:"Transaction History"}),t("table",{className:"w-full table-auto",children:[e("thead",{children:t("tr",{className:"bg-gray-2 text-left dark:bg-meta-4",children:[e("th",{className:"border border-[#eee] p-4 font-medium text-black dark:text-white",children:"No"}),e("th",{className:"border border-[#eee] p-4 font-medium text-black dark:text-white",children:"Date"}),e("th",{className:"border border-[#eee] p-4 font-medium text-black dark:text-white",children:"Amount"}),o("access::deposit-delete",a)&&e("th",{className:"border border-[#eee] p-4 font-medium text-black dark:text-white",children:"Action"})]})}),e("tbody",{children:h.length?h.map(({id:r,amount:n,deposit_date:p,status:i},f)=>t("tr",{children:[e("td",{className:"border border-[#eee] p-4 dark:border-strokedark",children:e("p",{className:"",children:f+1})}),e("td",{className:"border border-[#eee] p-4 dark:border-strokedark",children:e("p",{className:"",children:p})}),e("td",{className:"border border-[#eee] p-4 dark:border-strokedark",children:i===x?t("p",{className:"rounded-full text-center bg-danger bg-opacity-10 text-danger p-2",children:["- ",n," BDT"]}):t("p",{className:"",children:[n," BDT"]})}),o("access::deposit-delete",a)&&e("td",{className:"border border-[#eee] p-4 dark:border-strokedark",children:e("div",{className:"flex items-center gap-4 justify-end",children:e("button",{onClick:()=>D(r),className:"inline-flex items-center justify-center gap-0.5 focus:outline-none focus:underline",children:e(u,{name:"FaTrashAlt",className:"w-6 h-4 text-gray-400 fill-current"})})})})]},f)):e("tr",{className:"hover:bg-gray-100 focus-within:bg-gray-100",children:e("td",{className:"border border-[#eee] p-4 dark:border-strokedark",colSpan:4,children:e("p",{children:"No transaction found"})})})})]})]}),t("div",{children:[e("h6",{className:"mb-4 text-gray-900 text-xl font-bold",children:"Deposit Request"}),t("table",{className:"w-full table-auto",children:[e("thead",{children:t("tr",{className:"bg-gray-2 text-left dark:bg-meta-4",children:[e("th",{className:"border border-[#eee] p-4 font-medium text-black dark:text-white",children:"No"}),e("th",{className:"border border-[#eee] p-4 font-medium text-black dark:text-white",children:"Date"}),e("th",{className:"border border-[#eee] p-4 font-medium text-black dark:text-white",children:"Amount"}),o("access::deposit-approve",a)||o("access::deposit-reject",a)&&e("th",{className:"border border-[#eee] p-4 font-medium text-black dark:text-white",children:"Action"})]})}),e("tbody",{children:b.length?b.map(({id:r,amount:n,deposit_date:p},i)=>t("tr",{children:[e("td",{className:"border border-[#eee] p-4 dark:border-strokedark",children:e("p",{children:i+1})}),e("td",{className:"border border-[#eee] p-4 dark:border-strokedark",children:e("p",{children:p})}),e("td",{className:"border border-[#eee] p-4 dark:border-strokedark",children:e("p",{children:n})}),e("td",{className:"border border-[#eee] p-4 dark:border-strokedark",children:t("div",{className:"flex items-center gap-4 justify-end",children:[o("access::deposit-approve",a)&&e("button",{onClick:()=>j(r),className:"inline-flex items-center justify-center gap-0.5 focus:outline-none focus:underline",children:e(u,{name:"FaCheck",className:"w-6 h-4 text-buttonColor-400 fill-current"})}),o("access::deposit-reject",a)&&e("button",{onClick:()=>A(r),className:"inline-flex items-center justify-center gap-0.5 focus:outline-none focus:underline",children:e(u,{name:"FaTimes",className:"w-6 h-4 text-red-400 fill-current"})})]})})]},i)):e("tr",{children:e("td",{className:"border border-[#eee] p-4 dark:border-strokedark",colSpan:4,children:e("p",{children:"No transaction found"})})})})]})]})]})]})]})};I.layout=d=>e(_,{title:"Deposit Details",children:d});export{I as default};
