import{_ as I,r as g,j as a,F as O,a as e,f as D,g as F}from"./app-42a37551.js";import{I as f,A as L}from"./AuthenticatedLayout-8f203d5b.js";import{h as p}from"./moment-fbc5633a.js";import R from"./MealEditModal-2aeb7fed.js";import{C as l}from"./Card-eaf2f242.js";import{T as U,a as c}from"./TableData-899b5cbd.js";import{T as W}from"./TableAction-82fd779d.js";import"./Logo-white-2a851e2e.js";import"./TextInput-abafa868.js";const H=()=>{const{member_deposit:s,auth:k,meals:m,mealCharge:T,due:B,totalCost:w,fixedCost:P,totalMeal:v,todaysMeal:r,userMealCount:A}=I().props,[N,S]=g.exports.useState(k.user.meal_status===1),M={id:void 0,break_fast:0,lunch:0,dinner:0,created_at:"",user:"",user_id:0},[C,u]=g.exports.useState(M),[y,b]=g.exports.useState(!1),$=t=>(S(t),F.post(route("user.meal.update"),{user_id:k.user.id,status:t})),j=(t,o,h,d,i)=>{u({id:t,break_fast:o,lunch:h,dinner:d,created_at:i}),b(!0)},Y=()=>{F.post(route("user.meal.update.each"),C),b(!1),u(M)},E=()=>{if(s<=0)return 0;let t=parseFloat(s-w,2).toFixed(2);return t>0?t:0};return a(O,{children:[e("div",{className:"rounded-lg border border-stroke bg-white mb-5 shadow-default dark:border-strokedark dark:bg-boxdark",children:a("div",{className:"flex items-center justify-between p-2",children:[e("div",{children:e("h6",{className:"mb-4 text-xl font-bold pt-4 px-4",children:"Quick Meal On/Off"})}),e("div",{children:e("label",{htmlFor:"toggle1",className:"flex cursor-pointer select-none items-center",children:a("div",{className:"relative",children:[e("input",{disabled:A===0,type:"checkbox",id:"toggle1",onChange:t=>$(t.target.checked),defaultChecked:N,className:"sr-only"}),e("div",{className:"dark:bg-[#5A616B] block h-8 w-14 rounded-full bg-meta-9"}),e("div",{className:`absolute left-1 top-1 h-6 w-6 rounded-full bg-white transition ${N&&v!==0?"!right-1 !translate-x-full !bg-background-600":""}`})]})})})]})}),e("div",{className:"rounded-lg border border-stroke bg-white mb-5 shadow-default dark:border-strokedark dark:bg-boxdark",children:a("div",{className:"flex items-center justify-between p-2",children:[e("div",{children:e("h6",{className:"mb-4 text-xl font-bold pt-4 px-4",children:"All Meal calendar view"})}),e(D,{href:route("member.meal.calender.view"),className:"rounded border-gray-300 bg-green-600 shadow p-4",children:e(f,{name:"FaEye",className:"text-white"})})]})}),e("div",{className:"rounded-lg border border-stroke bg-white mb-5 shadow-default dark:border-strokedark dark:bg-boxdark",children:a("div",{className:"flex items-center justify-between p-2",children:[e("div",{children:a("h6",{className:"mb-4 text-xl font-bold pt-4 px-4",children:["Stats of"," ",e("span",{className:"text-2xl",children:p().format("MMMM YYYY")})]})}),e(D,{href:route("user.meal.show"),className:"rounded border-gray-300 bg-background-200 shadow p-4",children:e(f,{name:"FaEye",className:"text-white"})})]})}),e("div",{className:"rounded-lg border border-stroke bg-white mb-5 shadow-default dark:border-strokedark dark:bg-boxdark p-5",children:e("div",{className:"col-span-full mb-5",children:a("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3 md:gap-6 xl:grid-cols-3 2xl:gap-7.5",children:[e(l,{value:`Lunch : ${(r==null?void 0:r.lunch_total)||0} Dinner: ${(r==null?void 0:r.dinner_total)||0}`,text:"Today's Dorm Meal",icon:"FaRegSnowflake",bgName:"bg-gradient-to-r from-purple-400 via-pink-500 to-red-500 text-white",iconClass:"text-success"}),e(l,{value:v,text:"My Meal",icon:"FaRegSnowflake",bgName:"bg-gradient-to-bl from-green-500 via-blue-500 to-purple-500 text-white",iconClass:"text-success"}),e(l,{value:`${T} BDT`,text:"Meal Charge",icon:"FaRegSnowflake",bgName:"bg-gradient-to-r from-cyan-500 to-blue-500 text-white",iconClass:"text-success"}),e(l,{value:`${w} BDT`,text:"Total Cost ",icon:"FaMoneyBillWave",bgName:"bg-gradient-to-tl from-green-400  from-20% to-blue-500 to-80% text-white",iconClass:"text-success"}),e(l,{value:`${E()} BDT`,text:"Available Balance",icon:"FaMoneyBillWaveAlt",bgName:"bg-gradient-to-br from-green-500 via-blue-500 to-purple-500 text-white",iconClass:"text-success"}),e(l,{value:`${B} BDT`,text:"My Due",icon:"FaMoneyBillAlt",bgName:"bg-gradient-to-r from-pink-500  to-danger text-white",iconClass:"text-success"})]})})}),a("div",{className:"rounded-lg border border-stroke bg-white p-5 shadow-default dark:border-strokedark dark:bg-boxdark",children:[e("h2",{className:"text-title-md2 mb-10 font-semibold text-black dark:text-white",children:"Meal Plan"}),e("div",{className:"max-w-full overflow-x-auto",children:a("table",{className:"w-full table-auto",children:[e(U,{rows:["Date","Lunch","Dinner","Edit"]}),e("tbody",{children:m&&m.length?m.map(({id:t,lunch:o,break_fast:h,dinner:d,is_editable:i,created_at:x},_)=>{let n=p().format("YYYY-MM-DD")===x;return a("tr",{className:`${n?"text-white bg-success font-bold text-xl shadow-2xl":""}`,children:[e(c,{className:n?"text-white":"text-black dark:text-white",value:p(x).format("D MMM, dddd")}),e(c,{className:n?"text-white":"text-black dark:text-white",value:o}),e(c,{className:n?"text-white":"text-black dark:text-white",value:d}),e(W,{children:e("button",{disabled:!i,onClick:()=>j(t,h,o,d,x),className:`inline-flex ${i?"":" opacity-10"} items-center justify-center gap-0.5 focus:outline-none focus:underline`,children:e(f,{name:"FaEdit",className:"w-6 h-4 text-gray-400 hover:text-buttonColor-400 fill-current cursor-pointer"})})})]},_)}):e("tr",{children:e(c,{value:"No Data Found",colSpan:4,className:"text-center text-black dark:text-white"})})})]})})]}),y&&e(R,{mealData:C,setOpen:b,setMealData:u,open:y,handleConfirm:Y})]})};H.layout=s=>e(L,{title:"Dashboard",children:s});export{H as default};
