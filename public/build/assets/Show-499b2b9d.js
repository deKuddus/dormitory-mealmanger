import{_ as S,r as d,j as t,a as e,g as f}from"./app-b424552e.js";import{L as E}from"./Layout-012bfe45.js";import{S as I}from"./SelectInput-640692d3.js";import{h as m}from"./moment-fbc5633a.js";import{c as F,i as L}from"./utils-4fea7fd8.js";import{I as _}from"./BottomHeader-31b85409.js";import k from"./MealEditModal-ed36b62f.js";import"./index-2e4736b8.js";import"./TextInput-acb51a5b.js";import"./transition-47d699b3.js";const z=()=>{const{user:l,balance:N,bazar:b,mealCost:g,totalMealCost:v,fixedCost:p,due:M,totalMeal:y,user_permissions:w}=S().props,[C,D]=d.useState(m().format("MMMM-YYYY")),x={id:void 0,break_fast:0,lunch:0,dinner:0,created_at:"",user:"",user_id:0},[h,o]=d.useState(x),[Y,i]=d.useState(!1),u=F(),T=a=>{if(a)return f.get(route("meals.show",l.id),{month:a},{replace:!0,preserveState:!0})},B=(a,s,r,n,c)=>{o({id:a,break_fast:s,lunch:r,dinner:n,created_at:c,user:l.name,user_id:l.id}),i(!0)};return t("div",{children:[e(k,{mealData:h,setOpen:i,setMealData:o,open:Y,handleConfirm:()=>{f.post(route("meal.update"),h),i(!1),o(x)}}),t("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-6",children:[e("div",{className:"flex items-center",children:e("h1",{className:"text-3xl font-bold",children:"Meals"})}),e("div",{className:"flex items-center",children:e("div",{className:"relative z-30 w-64 px-4 py-6 mt-2",children:e(I,{label:"Month",name:"month",value:C,onChange:a=>{D(a.target.value),T(a.target.value)},children:u&&u.map((a,s)=>e("option",{value:a,defaultValue:m().format("MMMM-YYYY"),children:a},s))})})})]}),t("div",{className:"overflow-x-auto bg-white rounded shadow p-3",children:[e("div",{className:"col-span-full mb-5",children:t("div",{className:"grid gap-4 lg:gap-8 md:grid-cols-3",children:[e("div",{className:"relative p-6 rounded-xl",children:e("div",{className:"space-y-2 text-white text-center",children:t("div",{className:"flex flex-col items-center space-x-2 rtl:space-x-reverse text-xl font-medium ",children:[t("span",{className:"text-xxl font-bold text-gray-900",children:[" ",l.name]}),t("span",{className:"text-sm text-gray-900",children:["Balance ",N," BDT"]})]})})}),e("div",{className:"relative p-6 rounded-xl",children:e("div",{className:"space-y-2 text-white",children:t("div",{className:"flex flex-col items-center space-x-2 rtl:space-x-reverse text-xl font-medium ",children:[t("span",{className:"text-buttonColor-400",children:["Meal Charge: ",g," BDT "]}),t("span",{className:"text-gray-900 text-xl font-bold ",children:["Total Meal : ",y," "]}),t("span",{className:"text-gray-900 text-xl font-bold",children:["Fixed Cost : ",p," BDT"]}),t("span",{className:"text-gray-900 text-xl font-bold",children:["Bazar : ",b," BDT"]})]})})}),e("div",{className:"relative p-6 rounded-xl",children:e("div",{className:"space-y-2 text-white",children:t("div",{className:"flex flex-col items-center space-x-2 rtl:space-x-reverse text-xl font-medium ",children:[t("span",{className:"text-red-600 text-xl font-bold ",children:["Total Due: ",M," BDT "]}),t("span",{className:"text-gray-900 text-xl font-bold ",children:["Total Cost : ",v," "]}),t("span",{className:"text-gray-900 text-xl font-bold",children:["Total Fixed Cost : ",p," BDT"]})]})})})]})}),t("table",{className:"w-full whitespace-nowrap",children:[e("thead",{children:t("tr",{className:"font-bold text-left",children:[e("th",{className:"px-6 pt-5 pb-4 border",children:"Date"}),e("th",{className:"px-6 pt-5 pb-4 border",children:"Break Fast"}),e("th",{className:"px-6 pt-5 pb-4 border",children:"Lunch"}),e("th",{className:"px-6 pt-5 pb-4 border",children:"Dinner"}),e("th",{className:"px-6 pt-5 pb-4 border",children:"Action"})]})}),e("tbody",{children:l.meals?l.meals.map(({id:a,break_fast:s,lunch:r,dinner:n,created_at:c},j)=>t("tr",{className:"hover:bg-gray-100 focus-within:bg-gray-100",children:[e("td",{className:"border",children:e("p",{className:"flex items-center px-6 py-4 focus:text-indigo-700 focus:outline-none",children:m(c).format("Do MMMM YYYY")})}),e("td",{className:"border",children:e("p",{className:"flex items-center px-6 py-4 focus:text-indigo-700 focus:outline-none",children:s})}),e("td",{className:"border",children:e("p",{className:"flex items-center px-6 py-4 focus:text-indigo-700 focus:outline-none",children:r})}),e("td",{className:"border",children:e("p",{className:"flex items-center px-6 py-4 focus:text-indigo-700 focus:outline-none",children:n})}),L("access::meal-edit",w)&&e("td",{className:"border w-px border-t p-3 whitespace-nowrap",children:e("div",{className:"flex items-center gap-2 justify-end",children:e("button",{onClick:()=>B(a,s,r,n,c),className:"inline-flex items-center justify-center gap-0.5 focus:outline-none focus:underline",children:e(_,{name:"FaEdit",className:"w-6 h-4 text-gray-400 hover:text-buttonColor-400 fill-current cursor-pointer"})})})})]},j)):e("tr",{children:e("td",{className:"px-6 py-4 border",colSpan:"6",children:"No Meal found."})})})]})]})]})};z.layout=l=>e(E,{title:"Meal details",children:l});export{z as default};
