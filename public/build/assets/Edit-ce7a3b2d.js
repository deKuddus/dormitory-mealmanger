import{_ as x,r as _,K as C,j as i,a,n as S,f as I,Q as P}from"./app-523ce712.js";import{L as A}from"./Layout-8fcfbcd2.js";import{L as j}from"./LoadingButton-6d637685.js";import{T as o}from"./TextInput-92320638.js";import{S as d}from"./SelectInput-e62a4e71.js";import{S as D}from"./react-select.esm-5eb2699d.js";import{i as v}from"./utils-01c76667.js";import{l as L}from"./index-e4b74e0d.js";import{d as T}from"./api-0d5eeb61.js";import"./index-2e4736b8.js";import"./BottomHeader-7b0964c6.js";import"./_baseIsEqual-081efca3.js";import"./_equalByTag-c744d4a3.js";import"./_getTag-7cb17b8a.js";import"./_isIndex-78cc234f.js";const E=()=>{const{user:t,roles:p,rooms:m,user_permissions:g}=x().props,[f,u]=_.useState([]),{data:s,setData:r,errors:l,post:b,processing:N}=C({first_name:t.first_name||"",last_name:t.last_name||"",email:t.email||"",password:"",phone:t.phone||"",present_address:t.present_address||"",permanent_address:t.permanent_address||"",nid:t.nid||"",nid_type:t.nid_type||"0",institution:t.institution||"",company:t.company||"",status:t.status||"0",roles:t.roles&&t.roles.map(({id:e,name:n},h)=>e)||[],_method:"PUT",is_admin:t.is_admin,room_id:t.room_id,seat_id:t.seat_id,note:t.note}),y=e=>{e.preventDefault(),b(route("user.update",t.id))},w=p&&p.length?p.map(e=>({value:e.id,label:`${e.name}`})):[],c=async e=>{const{response:n,error:h}=await T(`/api/v1/seat/${e}`,"get");h?(P.error(h.data.message),u([])):n.data&&n.data.length>0?u(n.data):u([])};return _.useEffect(()=>{var e;m&&m.length&&(t.room_id?c(t.room_id):c((e=m[0])==null?void 0:e.id))},[m]),i("div",{children:[a(S,{title:`${s.first_name} ${s.last_name}`}),a("div",{className:"flex justify-start max-w-lg mb-8",children:i("h1",{className:"text-3xl font-bold",children:[a(I,{href:route("user.index"),className:"text-indigo-600 hover:text-indigo-700",children:"Members"}),a("span",{className:"mx-2 font-medium text-indigo-600",children:"/"}),s.first_name," ",s.last_name]})}),a("div",{className:"w-full overflow-hidden bg-white rounded shadow",children:i("form",{onSubmit:y,children:[i("div",{className:"flex flex-wrap p-8 -mb-8 -mr-6",children:[a(o,{className:"w-full pb-8 pr-6 md:w-1/2 lg:w-1/3",label:"First Name",name:"first_name",errors:l.first_name,value:s.first_name,onChange:e=>r("first_name",e.target.value)}),a(o,{className:"w-full pb-8 pr-6 md:w-1/2 lg:w-1/3",label:"Last Name",name:"last_name",errors:l.last_name,value:s.last_name,onChange:e=>r("last_name",e.target.value)}),a(o,{className:"w-full pb-8 pr-6 md:w-1/2 lg:w-1/3",label:"Email",name:"email",type:"email",errors:l.email,value:s.email,onChange:e=>r("email",e.target.value)}),v("access::password-change",g)&&a(o,{className:"w-full pb-8 pr-6 md:w-1/2 lg:w-1/3",label:"Password",name:"password",type:"password",errors:l.password,value:s.password,onChange:e=>r("password",e.target.value)}),a(o,{className:"w-full pb-8 pr-6 md:w-1/2 lg:w-1/3",label:"Phone",name:"phone",type:"number",errors:l.phone,value:s.phone,onChange:e=>r("phone",e.target.value)}),a(o,{className:"w-full pb-8 pr-6 md:w-1/2 lg:w-1/3",label:"Present Address",name:"present_address",type:"text",errors:l.present_address,value:s.present_address,onChange:e=>r("present_address",e.target.value)}),a(o,{className:"w-full pb-8 pr-6 md:w-1/2 lg:w-1/3",label:"Permanent Address",name:"permanent_address",type:"text",errors:l.permanent_address,value:s.permanent_address,onChange:e=>r("permanent_address",e.target.value)}),a(o,{className:"w-full pb-8 pr-6 md:w-1/2 lg:w-1/3",label:"NID",name:"nid",type:"text",errors:l.nid,value:s.nid,onChange:e=>r("nid",e.target.value)}),i(d,{className:"w-full pb-8 pr-6 md:w-1/2 lg:w-1/3",label:"NID Type",name:"nid_type",errors:l.nid_type,value:s.nid_type,onChange:e=>r("nid_type",e.target.value),children:[a("option",{value:"1",children:"National ID"}),a("option",{value:"0",children:"Birth Certificate"})]}),a(o,{className:"w-full pb-8 pr-6 md:w-1/2 lg:w-1/3",label:"Institution",name:"institution",type:"text",errors:l.institution,value:s.institution,onChange:e=>r("institution",e.target.value)}),a(o,{className:"w-full pb-8 pr-6 md:w-1/2 lg:w-1/3",label:"Company",name:"company",type:"text",errors:l.company,value:s.company,onChange:e=>r("company",e.target.value)}),i(d,{className:"w-full pb-8 pr-6 md:w-1/2 lg:w-1/3",label:"Status",name:"status",errors:l.status,value:s.status,onChange:e=>r("status",e.target.value),children:[a("option",{value:"1",children:"Active"}),a("option",{value:"0",children:"InActive"})]}),i(d,{className:"w-full pb-8 pr-6 md:w-1/2 lg:w-1/3",label:"Is Admin",name:"is_admin",errors:l.is_admin,value:s.is_admin,onChange:e=>r("is_admin",e.target.value),children:[a("option",{value:"1",children:"Yes"}),a("option",{value:"0",children:"No"})]}),a(d,{className:"w-full pb-8 pr-6 md:w-1/2 lg:w-1/3",label:"Room",name:"room_id",errors:l.room_id,value:s.room_id,onChange:e=>{r("room_id",e.target.value),c(e.target.value)},children:m&&m.map((e,n)=>a("option",{defaultValue:s.room_id,value:e.id,children:e.name},n))}),i(d,{className:"w-full pb-8 pr-6 md:w-1/2 lg:w-1/3",label:"Seat",name:"seat_id",errors:l.seat_id,value:s.seat_id,onChange:e=>{r("seat_id",e.target.value)},children:[a("option",{children:"Select Seat"}),f&&f.map((e,n)=>a("option",{defaultValue:s.seat_id,value:e.id,children:e.seat_no},n))]}),i("div",{className:"w-full pb-8 pr-6 md:w-1/2 lg:w-1/3",children:[a("label",{className:"form-label",children:"Roles"}),a(D,{isMulti:!0,isClearable:!0,classNamePrefix:"react-select",options:w,value:w.filter(e=>s.roles.includes(e.value)),onChange:e=>r("roles",e&&e.map(n=>n.value)||[])}),l&&l.roles&&a("div",{className:"form-error",children:l.roles})]}),v("access::user-note-edit",g)&&i("div",{className:"w-full pb-8 pr-6 mb-12",children:[a("label",{className:"form-label",children:"Notes"}),a(L,{className:"h-48 ",theme:"snow",value:s.note,onChange:e=>r("note",e)})]})]}),a("div",{className:"flex items-center justify-end px-8 py-4 bg-gray-100 border-t border-gray-200",children:a(j,{loading:N,type:"submit",className:"btn-indigo",children:"Update User"})})]})})]})};E.layout=t=>a(A,{children:t});export{E as default};
